<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cabax Admin Pro - Luxury Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * { 
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --luxury-black: #0a0a0a;
            --luxury-dark: #1a1a1a;
            --luxury-gray: #2a2a2a;
            --luxury-gold: #d4af37;
            --luxury-light: #f5f5f5;
        }
        
        body { 
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: #f5f5f5;
            overflow-x: hidden;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .gold-accent {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .luxury-card {
            background: rgba(26, 26, 26, 0.6);
            border: 1px solid rgba(212, 175, 55, 0.15);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .luxury-card:hover {
            border-color: rgba(212, 175, 55, 0.4);
            box-shadow: 0 8px 32px rgba(212, 175, 55, 0.12);
            transform: translateY(-2px);
        }
        
        .luxury-btn {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #0a0a0a;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            touch-action: manipulation;
        }
        
        .luxury-btn:active {
            transform: scale(0.98);
        }
        
        .luxury-btn:hover {
            box-shadow: 0 8px 24px rgba(212, 175, 55, 0.35);
            transform: translateY(-1px);
        }
        
        .sidebar-luxury {
            background: linear-gradient(180deg, rgba(10, 10, 10, 0.98) 0%, rgba(26, 26, 26, 0.98) 100%);
            border-right: 1px solid rgba(212, 175, 55, 0.15);
            backdrop-filter: blur(10px);
        }
        
        /* „É¢„Éê„Ç§„É´„Éú„Éà„É†„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, rgba(10, 10, 10, 0.98) 0%, rgba(26, 26, 26, 0.98) 100%);
            border-top: 1px solid rgba(212, 175, 55, 0.15);
            backdrop-filter: blur(20px);
            z-index: 50;
            padding: 8px 0;
            display: none;
        }
        
        @media (max-width: 768px) {
            .bottom-nav {
                display: block;
            }
            .main-content {
                padding-bottom: 80px !important;
            }
            .sidebar-luxury {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            .sidebar-luxury.active {
                transform: translateX(0);
            }
        }
        
        .bottom-nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 8px;
            color: #9ca3af;
            transition: all 0.2s ease;
            border-radius: 12px;
            cursor: pointer;
            touch-action: manipulation;
        }
        
        .bottom-nav-btn.active {
            color: #d4af37;
            background: rgba(212, 175, 55, 0.1);
        }
        
        .bottom-nav-btn:active {
            transform: scale(0.95);
        }
        
        .menu-image-container {
            width: 100%;
            height: 240px;
            overflow: hidden;
            border-radius: 16px 16px 0 0;
            background: rgba(42, 42, 42, 0.5);
            position: relative;
        }
        
        .menu-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .menu-image:hover {
            transform: scale(1.05);
        }
        
        .image-upload-area {
            border: 2px dashed rgba(212, 175, 55, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
            background: rgba(42, 42, 42, 0.3);
        }
        
        .image-upload-area:hover {
            border-color: rgba(212, 175, 55, 0.6);
            background: rgba(212, 175, 55, 0.05);
        }
        
        .image-preview {
            max-width: 100%;
            max-height: 300px;
            border-radius: 12px;
            margin-top: 12px;
        }
        
        @media print {
            .no-print { display: none !important; }
            .bottom-nav { display: none !important; }
        }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeInUp 0.4s ease-out; }
        .modal { display: none; }
        .modal.active { display: flex; }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-in { animation: fadeInUp 0.5s ease-out; }
        
        .notification {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 9999;
            animation: fadeInUp 0.3s;
            min-width: 300px;
        }
        
        @media (max-width: 640px) {
            .notification {
                top: 16px;
                right: 16px;
                left: 16px;
                min-width: auto;
            }
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }
        
        @media (max-width: 640px) {
            .calendar-grid {
                gap: 4px;
            }
        }
        
        .calendar-cell {
            min-height: 80px;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        
        @media (max-width: 640px) {
            .calendar-cell {
                min-height: 60px;
                padding: 4px;
            }
        }
        
        .calendar-cell:hover {
            background: rgba(212, 175, 55, 0.05);
        }
        
        .shift-badge {
            font-size: 0.7rem;
            padding: 4px 8px;
            border-radius: 6px;
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #0a0a0a;
            font-weight: 600;
            display: inline-block;
            margin-top: 4px;
        }
        
        @media (max-width: 640px) {
            .shift-badge {
                font-size: 0.6rem;
                padding: 2px 4px;
            }
        }
        
        input, select, textarea {
            background: rgba(255, 255, 255, 0.04) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            color: #f5f5f5 !important;
            transition: all 0.2s ease;
            font-size: 16px !important; /* iOS zoom prevention */
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: rgba(212, 175, 55, 0.5) !important;
            outline: none !important;
            background: rgba(255, 255, 255, 0.06) !important;
        }
        
        table {
            background: rgba(26, 26, 26, 0.4);
        }
        
        thead {
            background: rgba(212, 175, 55, 0.08) !important;
        }
        
        tbody tr {
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: background 0.2s ease;
        }
        
        tbody tr:hover {
            background: rgba(212, 175, 55, 0.06);
        }
        
        .nav-btn.active {
            background: rgba(212, 175, 55, 0.15);
            border-left: 3px solid #d4af37;
            color: #f4d03f;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .status-available { background: #10b981; }
        .status-occupied { background: #ef4444; }
        .status-reserved { background: #f59e0b; }
        
        .table-name {
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: -0.02em;
        }
        
        @media (max-width: 640px) {
            .table-name {
                font-size: 1.5rem;
            }
        }
        
        /* „Çø„ÉÉ„ÉÅ„Éï„É¨„É≥„Éâ„É™„Éº„Å™„Éú„Çø„É≥„Çµ„Ç§„Ç∫ */
        button {
            min-height: 44px;
            touch-action: manipulation;
        }
        
        @media (max-width: 640px) {
            button {
                min-height: 48px;
            }
        }
        
        scrollbar-width: thin;
        scrollbar-color: rgba(212, 175, 55, 0.3) rgba(26, 26, 26, 0.3);
        
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(26, 26, 26, 0.3);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(212, 175, 55, 0.3);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(212, 175, 55, 0.5);
        }
        
        /* „É¢„Éê„Ç§„É´ÊúÄÈÅ©Âåñ */
        @media (max-width: 640px) {
            h1 {
                font-size: 2rem !important;
            }
            .text-5xl {
                font-size: 2.5rem !important;
            }
            .text-4xl {
                font-size: 1.875rem !important;
            }
        }
    </style>
</head>
<body>
    <div id="notificationArea"></div>

    <!-- „É≠„Ç∞„Ç§„É≥ÁîªÈù¢ -->
    <div id="loginPage" class="min-h-screen flex items-center justify-center p-4">
        <div class="w-full max-w-md p-10 glass-effect rounded-3xl shadow-2xl animate-fade-in">
            <div class="text-center mb-10">
                <h2 class="text-5xl font-bold gold-accent mb-3">Cabax</h2>
                <div class="w-16 h-1 bg-gradient-to-r from-transparent via-yellow-600 to-transparent mx-auto mb-4"></div>
                <p class="text-sm text-gray-400 tracking-wide">LUXURY MANAGEMENT SYSTEM</p>
            </div>
            <form onsubmit="handleLogin(event)" class="space-y-5">
                <input type="text" id="shopCode" value="SHOP001" placeholder="Â∫óËàó„Ç≥„Éº„Éâ" class="w-full px-5 py-4 rounded-xl text-sm">
                <input type="email" id="email" value="admin@example.com" placeholder="„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ" class="w-full px-5 py-4 rounded-xl text-sm">
                <input type="password" id="password" value="password" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ" class="w-full px-5 py-4 rounded-xl text-sm">
                <button type="submit" class="w-full py-4 luxury-btn rounded-xl font-semibold text-sm tracking-wide">
                    „É≠„Ç∞„Ç§„É≥
                </button>
            </form>
        </div>
    </div>

    <!-- „É°„Ç§„É≥„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ -->
    <div id="dashboardPage" class="hidden">
        <!-- „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„Çµ„Ç§„Éâ„Éê„Éº -->
        <div id="sidebar" class="fixed inset-y-0 left-0 z-40 w-72 sidebar-luxury no-print">
            <div class="flex h-full flex-col">
                <div class="flex h-24 items-center justify-between px-6 border-b border-gray-800">
                    <h1 class="text-3xl font-bold gold-accent tracking-tight">Cabax</h1>
                    <button onclick="toggleMobileSidebar()" class="md:hidden text-gray-400 text-2xl">‚úï</button>
                </div>
                
                <div class="border-b border-gray-800 p-6">
                    <p class="text-xs text-gray-500 uppercase tracking-widest mb-2">Âñ∂Ê•≠Êó•</p>
                    <p class="text-sm font-medium text-gray-300" id="businessDate"></p>
                </div>
                
                <nav class="flex-1 overflow-y-auto px-4 py-6 space-y-1">
                    <button onclick="showTab('dashboard')" class="nav-btn active w-full flex items-center gap-3 rounded-xl px-4 py-3.5 text-sm text-gray-300 hover:bg-gray-800/50 transition">
                        <span class="text-lg">üìä</span>
                        <span>„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</span>
                    </button>
                    <button onclick="showTab('tables')" class="nav-btn w-full flex items-center gap-3 rounded-xl px-4 py-3.5 text-sm text-gray-300 hover:bg-gray-800/50 transition">
                        <span class="text-lg">ü™ë</span>
                        <span>„ÉÜ„Éº„Éñ„É´ÁÆ°ÁêÜ</span>
                    </button>
                    <button onclick="showTab('attendance')" class="nav-btn w-full flex items-center gap-3 rounded-xl px-4 py-3.5 text-sm text-gray-300 hover:bg-gray-800/50 transition">
                        <span class="text-lg">‚è∞</span>
                        <span>Âã§ÊÄ†ÁÆ°ÁêÜ</span>
                    </button>
                    <button onclick="showTab('shifts')" class="nav-btn w-full flex items-center gap-3 rounded-xl px-4 py-3.5 text-sm text-gray-300 hover:bg-gray-800/50 transition">
                        <span class="text-lg">üìÖ</span>
                        <span>„Ç∑„Éï„ÉàÁÆ°ÁêÜ</span>
                    </button>
                    <button onclick="showTab('menu')" class="nav-btn w-full flex items-center gap-3 rounded-xl px-4 py-3.5 text-sm text-gray-300 hover:bg-gray-800/50 transition">
                        <span class="text-lg">üçΩÔ∏è</span>
                        <span>„É°„Éã„É•„ÉºÁÆ°ÁêÜ</span>
                    </button>
                    <button onclick="showTab('casts')" class="nav-btn w-full flex items-center gap-3 rounded-xl px-4 py-3.5 text-sm text-gray-300 hover:bg-gray-800/50 transition">
                        <span class="text-lg">üë•</span>
                        <span>„Ç≠„É£„Çπ„ÉàÁÆ°ÁêÜ</span>
                    </button>
                    <button onclick="showTab('reports')" class="nav-btn w-full flex items-center gap-3 rounded-xl px-4 py-3.5 text-sm text-gray-300 hover:bg-gray-800/50 transition">
                        <span class="text-lg">üìà</span>
                        <span>Â£≤‰∏ä„É¨„Éù„Éº„Éà</span>
                    </button>
                </nav>
                
                <div class="border-t border-gray-800 p-4">
                    <button onclick="logout()" class="w-full bg-red-900/20 text-red-400 border border-red-800/30 py-3.5 rounded-xl hover:bg-red-900/30 transition text-sm font-medium">
                        „É≠„Ç∞„Ç¢„Ç¶„Éà
                    </button>
                </div>
            </div>
        </div>

        <!-- „É¢„Éê„Ç§„É´„É°„Éã„É•„Éº„Éú„Çø„É≥ -->
        <button onclick="toggleMobileSidebar()" class="md:hidden fixed top-4 left-4 z-50 bg-gray-800/80 backdrop-blur-sm text-gray-300 p-3 rounded-xl no-print">
            ‚ò∞
        </button>

        <!-- „É¢„Éê„Ç§„É´„Éú„Éà„É†„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ -->
        <div class="bottom-nav no-print">
            <div class="grid grid-cols-4 gap-1 px-2">
                <button onclick="showTab('dashboard')" class="bottom-nav-btn active" data-tab="dashboard">
                    <span class="text-xl">üìä</span>
                    <span class="text-xs">„ÉÄ„ÉÉ„Ç∑„É•</span>
                </button>
                <button onclick="showTab('tables')" class="bottom-nav-btn" data-tab="tables">
                    <span class="text-xl">ü™ë</span>
                    <span class="text-xs">„ÉÜ„Éº„Éñ„É´</span>
                </button>
                <button onclick="showTab('menu')" class="bottom-nav-btn" data-tab="menu">
                    <span class="text-xl">üçΩÔ∏è</span>
                    <span class="text-xs">„É°„Éã„É•„Éº</span>
                </button>
                <button onclick="showTab('reports')" class="bottom-nav-btn" data-tab="reports">
                    <span class="text-xl">üìà</span>
                    <span class="text-xs">Â£≤‰∏ä</span>
                </button>
            </div>
        </div>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <div class="md:pl-72 min-h-screen main-content">
            <main class="p-4 md:p-10">
                
                <!-- „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ -->
                <div id="dashboard-tab" class="tab-content active">
                    <div class="mb-8 md:mb-10">
                        <h1 class="text-4xl md:text-5xl font-bold gold-accent mb-3 md:mb-4">Dashboard</h1>
                        <p class="text-gray-400 text-base md:text-lg mb-6 md:mb-8">„É™„Ç¢„É´„Çø„Ç§„É†Âñ∂Ê•≠Áä∂Ê≥Å</p>
                        <div class="flex flex-wrap gap-2 md:gap-3">
                            <button onclick="syncWithBackend()" class="luxury-btn px-6 md:px-8 py-3 md:py-3.5 rounded-xl text-sm">
                                üîÑ APIÂêåÊúü
                            </button>
                            <button onclick="printDailyReport()" class="bg-gray-800 text-gray-300 px-6 md:px-8 py-3 md:py-3.5 rounded-xl hover:bg-gray-700 transition text-sm">
                                üñ®Ô∏è Êó•Â†±Âç∞Âà∑
                            </button>
                            <button onclick="exportCSV()" class="bg-gray-800 text-gray-300 px-6 md:px-8 py-3 md:py-3.5 rounded-xl hover:bg-gray-700 transition text-sm">
                                üì• CSVÂá∫Âäõ
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6 mb-8 md:mb-10">
                        <div class="luxury-card rounded-2xl p-4 md:p-8 shadow-xl">
                            <p class="text-xs md:text-sm text-gray-400 mb-2 md:mb-3 uppercase tracking-wide">Êú¨Êó•„ÅÆÂ£≤‰∏ä</p>
                            <p class="text-2xl md:text-4xl font-bold gold-accent" id="totalSales">¬•0</p>
                        </div>
                        <div class="luxury-card rounded-2xl p-4 md:p-8 shadow-xl">
                            <p class="text-xs md:text-sm text-gray-400 mb-2 md:mb-3 uppercase tracking-wide">Êù•Â∫óÁµÑÊï∞</p>
                            <p class="text-2xl md:text-4xl font-bold text-gray-200" id="totalCustomers">0ÁµÑ</p>
                        </div>
                        <div class="luxury-card rounded-2xl p-4 md:p-8 shadow-xl">
                            <p class="text-xs md:text-sm text-gray-400 mb-2 md:mb-3 uppercase tracking-wide">Âá∫Âã§‰∏≠</p>
                            <p class="text-2xl md:text-4xl font-bold text-gray-200" id="workingCasts">0Âêç</p>
                        </div>
                        <div class="luxury-card rounded-2xl p-4 md:p-8 shadow-xl">
                            <p class="text-xs md:text-sm text-gray-400 mb-2 md:mb-3 uppercase tracking-wide">ÂÆ¢Âçò‰æ°</p>
                            <p class="text-2xl md:text-4xl font-bold text-gray-200" id="averageSpend">¬•0</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6">
                        <div class="luxury-card rounded-2xl p-6 md:p-8 shadow-xl">
                            <h3 class="text-lg md:text-xl font-semibold mb-4 md:mb-6 text-gray-200">ÊôÇÈñìÂ∏ØÂà•Â£≤‰∏ä</h3>
                            <canvas id="salesChart"></canvas>
                        </div>
                        <div class="luxury-card rounded-2xl p-6 md:p-8 shadow-xl">
                            <h3 class="text-lg md:text-xl font-semibold mb-4 md:mb-6 text-gray-200">ÊúÄËøë„ÅÆÊ¥ªÂãï</h3>
                            <div id="recentActivities" class="space-y-3 md:space-y-4"></div>
                        </div>
                    </div>
                </div>

                <!-- Âã§ÊÄ†ÁÆ°ÁêÜ„Çø„Éñ -->
                <div id="attendance-tab" class="tab-content">
                    <h1 class="text-4xl md:text-5xl font-bold gold-accent mb-8 md:mb-10">Âã§ÊÄ†ÁÆ°ÁêÜ</h1>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-8 md:mb-10">
                        <div class="luxury-card rounded-2xl p-6 md:p-8 shadow-xl">
                            <h3 class="text-xl md:text-2xl font-semibold mb-4 md:mb-6 text-gray-200">üìç ÊâìÂàª</h3>
                            <select id="attendanceCast" class="w-full rounded-xl px-4 md:px-5 py-3 md:py-4 mb-4 md:mb-6 text-sm">
                                <option value="">„Ç≠„É£„Çπ„Éà„ÇíÈÅ∏Êäû</option>
                            </select>
                            <div class="grid grid-cols-2 gap-3 md:gap-4">
                                <button onclick="clockIn()" class="bg-green-900/30 border border-green-700/50 text-green-400 py-4 md:py-5 rounded-xl font-semibold hover:bg-green-900/50 transition text-sm md:text-base">
                                    ‚úÖ Âá∫Âã§
                                </button>
                                <button onclick="clockOut()" class="bg-red-900/30 border border-red-700/50 text-red-400 py-4 md:py-5 rounded-xl font-semibold hover:bg-red-900/50 transition text-sm md:text-base">
                                    ‚ùå ÈÄÄÂã§
                                </button>
                            </div>
                        </div>

                        <div class="luxury-card rounded-2xl p-6 md:p-8 shadow-xl">
                            <h3 class="text-xl md:text-2xl font-semibold mb-4 md:mb-6 text-gray-200">üë• Êú¨Êó•„ÅÆÂá∫Âã§ËÄÖ</h3>
                            <div id="todayAttendance" class="space-y-3"></div>
                        </div>
                    </div>

                    <div class="luxury-card rounded-2xl p-4 md:p-8 shadow-xl">
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 md:mb-8 gap-4">
                            <h3 class="text-xl md:text-2xl font-semibold text-gray-200">üìã Âã§ÊÄ†Â±•Ê≠¥</h3>
                            <button onclick="exportAttendanceCSV()" class="luxury-btn px-6 md:px-8 py-2.5 md:py-3 rounded-xl text-sm w-full md:w-auto">
                                CSVÂá∫Âäõ
                            </button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full text-sm">
                                <thead>
                                    <tr>
                                        <th class="text-left py-3 md:py-5 px-3 md:px-6 text-gray-400 font-medium text-xs md:text-sm">Êó•‰ªò</th>
                                        <th class="text-left py-3 md:py-5 px-3 md:px-6 text-gray-400 font-medium text-xs md:text-sm">„Ç≠„É£„Çπ„Éà</th>
                                        <th class="text-center py-3 md:py-5 px-3 md:px-6 text-gray-400 font-medium text-xs md:text-sm">Âá∫Âã§</th>
                                        <th class="text-center py-3 md:py-5 px-3 md:px-6 text-gray-400 font-medium text-xs md:text-sm">ÈÄÄÂã§</th>
                                        <th class="text-center py-3 md:py-5 px-3 md:px-6 text-gray-400 font-medium text-xs md:text-sm hidden md:table-cell">Âä¥ÂÉçÊôÇÈñì</th>
                                        <th class="text-center py-3 md:py-5 px-3 md:px-6 text-gray-400 font-medium text-xs md:text-sm">Áä∂ÊÖã</th>
                                    </tr>
                                </thead>
                                <tbody id="attendanceTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- „ÉÜ„Éº„Éñ„É´ÁÆ°ÁêÜ -->
                <div id="tables-tab" class="tab-content">
                    <h1 class="text-4xl md:text-5xl font-bold gold-accent mb-8 md:mb-10">„ÉÜ„Éº„Éñ„É´ÁÆ°ÁêÜ</h1>
                    <div id="tablesGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 md:gap-4"></div>
                </div>

                <!-- „Ç∑„Éï„ÉàÁÆ°ÁêÜ -->
                <div id="shifts-tab" class="tab-content">
                    <h1 class="text-4xl md:text-5xl font-bold gold-accent mb-6 md:mb-8">„Ç∑„Éï„ÉàÁÆ°ÁêÜ</h1>
                    <div class="mb-6 md:mb-8 flex flex-wrap gap-2 md:gap-3">
                        <button onclick="openAddShiftModal()" class="luxury-btn px-6 md:px-8 py-3 md:py-3.5 rounded-xl text-sm flex-1 md:flex-none">
                            ‚ûï „Ç∑„Éï„ÉàËøΩÂä†
                        </button>
                        <button onclick="printShiftTable()" class="bg-gray-800 text-gray-300 px-6 md:px-8 py-3 md:py-3.5 rounded-xl hover:bg-gray-700 transition text-sm flex-1 md:flex-none">
                            üñ®Ô∏è Âç∞Âà∑
                        </button>
                    </div>

                    <div class="luxury-card rounded-2xl p-4 md:p-8 shadow-xl mb-6 md:mb-8">
                        <div class="flex items-center justify-between mb-6 md:mb-8">
                            <button onclick="previousMonth()" class="px-4 md:px-6 py-2 md:py-3 bg-gray-800 rounded-xl hover:bg-gray-700 transition">‚Üê</button>
                            <h3 class="text-lg md:text-2xl font-semibold text-gray-200" id="currentMonth">2024Âπ¥11Êúà</h3>
                            <button onclick="nextMonth()" class="px-4 md:px-6 py-2 md:py-3 bg-gray-800 rounded-xl hover:bg-gray-700 transition">‚Üí</button>
                        </div>
                        <div class="calendar-grid" id="shiftCalendar"></div>
                    </div>

                    <div class="luxury-card rounded-2xl p-6 md:p-8 shadow-xl">
                        <h3 class="text-xl md:text-2xl font-semibold mb-4 md:mb-6 text-gray-200">‰ªäÈÄ±„ÅÆ„Ç∑„Éï„Éà</h3>
                        <div id="weeklyShifts" class="space-y-3 md:space-y-4"></div>
                    </div>
                </div>

                <!-- „É°„Éã„É•„ÉºÁÆ°ÁêÜ -->
                <div id="menu-tab" class="tab-content">
                    <div class="mb-8 md:mb-10 flex flex-col md:flex-row justify-between items-start gap-4">
                        <div>
                            <h1 class="text-4xl md:text-5xl font-bold gold-accent mb-2 md:mb-3">„É°„Éã„É•„ÉºÁÆ°ÁêÜ</h1>
                            <p class="text-gray-400 text-base md:text-lg">ÂïÜÂìÅÁîªÂÉè‰ªò„Åç„É°„Éã„É•„Éº</p>
                        </div>
                        <button onclick="openAddMenuModal()" class="luxury-btn px-6 md:px-8 py-3 md:py-3.5 rounded-xl text-sm w-full md:w-auto">
                            ‚ûï „É°„Éã„É•„ÉºËøΩÂä†
                        </button>
                    </div>
                    <div id="menuGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6"></div>
                </div>

                <!-- „Ç≠„É£„Çπ„ÉàÁÆ°ÁêÜ -->
                <div id="casts-tab" class="tab-content">
                    <div class="mb-8 md:mb-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                        <h1 class="text-4xl md:text-5xl font-bold gold-accent">„Ç≠„É£„Çπ„ÉàÁÆ°ÁêÜ</h1>
                        <button onclick="openAddCastModal()" class="luxury-btn px-6 md:px-8 py-3 md:py-3.5 rounded-xl text-sm w-full md:w-auto">
                            ‚ûï „Ç≠„É£„Çπ„ÉàËøΩÂä†
                        </button>
                    </div>
                    <div id="castsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"></div>
                </div>

                <!-- Â£≤‰∏ä„É¨„Éù„Éº„Éà -->
                <div id="reports-tab" class="tab-content">
                    <div class="mb-8 md:mb-10">
                        <h1 class="text-4xl md:text-5xl font-bold gold-accent mb-3 md:mb-4">Â£≤‰∏ä„É¨„Éù„Éº„Éà</h1>
                        <div class="mt-6 md:mt-8 flex flex-wrap gap-2 md:gap-3">
                            <button onclick="generateReport('daily')" class="luxury-btn px-6 md:px-8 py-3 md:py-3.5 rounded-xl text-sm flex-1 md:flex-none">Êó•Ê¨°</button>
                            <button onclick="generateReport('weekly')" class="bg-gray-800 text-gray-300 px-6 md:px-8 py-3 md:py-3.5 rounded-xl hover:bg-gray-700 transition text-sm flex-1 md:flex-none">ÈÄ±Ê¨°</button>
                            <button onclick="generateReport('monthly')" class="bg-gray-800 text-gray-300 px-6 md:px-8 py-3 md:py-3.5 rounded-xl hover:bg-gray-700 transition text-sm flex-1 md:flex-none">ÊúàÊ¨°</button>
                            <button onclick="exportFullReport()" class="bg-gray-800 text-gray-300 px-6 md:px-8 py-3 md:py-3.5 rounded-xl hover:bg-gray-700 transition text-sm flex-1 md:flex-none">„Éï„É´Âá∫Âäõ</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6 md:mb-8">
                        <div class="luxury-card rounded-2xl p-6 md:p-8 shadow-xl">
                            <h3 class="text-lg md:text-xl font-semibold mb-4 md:mb-6 text-gray-200">Êó•Âà•Â£≤‰∏äÊé®Áßª</h3>
                            <canvas id="dailySalesChart"></canvas>
                        </div>
                        <div class="luxury-card rounded-2xl p-6 md:p-8 shadow-xl">
                            <h3 class="text-lg md:text-xl font-semibold mb-4 md:mb-6 text-gray-200">„Ç´„ÉÜ„Ç¥„É™Âà•Â£≤‰∏ä</h3>
                            <canvas id="categorySalesChart"></canvas>
                        </div>
                    </div>

                    <div class="luxury-card rounded-2xl p-4 md:p-8 shadow-xl">
                        <h3 class="text-xl md:text-2xl font-semibold mb-6 md:mb-8 text-gray-200">Â£≤‰∏äÊòéÁ¥∞</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full text-sm">
                                <thead>
                                    <tr>
                                        <th class="text-left py-3 md:py-5 px-3 md:px-6 text-gray-400 font-medium text-xs md:text-sm">Êó•‰ªò</th>
                                        <th class="text-left py-3 md:py-5 px-3 md:px-6 text-gray-400 font-medium text-xs md:text-sm">„ÉÜ„Éº„Éñ„É´</th>
                                        <th class="text-center py-3 md:py-5 px-3 md:px-6 text-gray-400 font-medium text-xs md:text-sm hidden md:table-cell">‰∫∫Êï∞</th>
                                        <th class="text-right py-3 md:py-5 px-3 md:px-6 text-gray-400 font-medium text-xs md:text-sm">Â£≤‰∏ä</th>
                                    </tr>
                                </thead>
                                <tbody id="reportTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- „É¢„Éº„ÉÄ„É´: „É°„Éã„É•„ÉºËøΩÂä† -->
    <div id="addMenuModal" class="modal fixed inset-0 z-50 items-center justify-center bg-black bg-opacity-70 p-4">
        <div class="w-full max-w-lg glass-effect rounded-2xl shadow-2xl">
            <div class="border-b border-gray-700 px-6 md:px-8 py-5 md:py-6 flex items-center justify-between">
                <h2 class="text-xl md:text-2xl font-bold gold-accent">„É°„Éã„É•„ÉºËøΩÂä†</h2>
                <button onclick="closeModal('addMenuModal')" class="text-gray-400 hover:text-gray-200 text-2xl">‚úï</button>
            </div>
            <div class="p-6 md:p-8">
                <form onsubmit="addMenuItem(event)" class="space-y-4 md:space-y-5">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">ÂïÜÂìÅÁîªÂÉè</label>
                        <div class="image-upload-area rounded-xl p-6 md:p-8 text-center" onclick="document.getElementById('menuImageInput').click()">
                            <input type="file" id="menuImageInput" accept="image/*" class="hidden" onchange="previewMenuImage(event)">
                            <p class="text-gray-400 mb-2 text-sm md:text-base">üì∏ „ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÁîªÂÉè„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</p>
                            <p class="text-xs text-gray-500">JPG, PNG, GIF (ÊúÄÂ§ß5MB)</p>
                        </div>
                        <img id="menuImagePreview" class="image-preview hidden" />
                    </div>
                    <input type="text" id="menuName" placeholder="ÂïÜÂìÅÂêç" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm" required>
                    <select id="menuCategory" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm">
                        <option value="bottle">„Éú„Éà„É´</option>
                        <option value="drink">„Éâ„É™„É≥„ÇØ</option>
                        <option value="food">„Éï„Éº„Éâ</option>
                        <option value="set">„Çª„ÉÉ„Éà</option>
                    </select>
                    <input type="number" id="menuPrice" placeholder="‰æ°Ê†º" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm" required>
                    <textarea id="menuDescription" placeholder="Ë™¨ÊòéÔºà‰ªªÊÑèÔºâ" rows="3" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm"></textarea>
                    <div class="flex gap-3 pt-4">
                        <button type="submit" class="flex-1 luxury-btn py-3 md:py-4 rounded-xl font-semibold text-sm">ËøΩÂä†</button>
                        <button type="button" onclick="closeModal('addMenuModal')" class="flex-1 bg-gray-800 text-gray-300 py-3 md:py-4 rounded-xl hover:bg-gray-700 transition text-sm">„Ç≠„É£„É≥„Çª„É´</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- „É¢„Éº„ÉÄ„É´: „Ç≠„É£„Çπ„ÉàËøΩÂä† -->
    <div id="addCastModal" class="modal fixed inset-0 z-50 items-center justify-center bg-black bg-opacity-70 p-4">
        <div class="w-full max-w-md glass-effect rounded-2xl shadow-2xl">
            <div class="border-b border-gray-700 px-6 md:px-8 py-5 md:py-6 flex items-center justify-between">
                <h2 class="text-xl md:text-2xl font-bold gold-accent">„Ç≠„É£„Çπ„ÉàËøΩÂä†</h2>
                <button onclick="closeModal('addCastModal')" class="text-gray-400 hover:text-gray-200 text-2xl">‚úï</button>
            </div>
            <div class="p-6 md:p-8">
                <form onsubmit="addCast(event)" class="space-y-4 md:space-y-5">
                    <input type="text" id="castName" placeholder="ÂêçÂâç" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm" required>
                    <select id="castRank" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm">
                        <option value="regular">„É¨„ÇÆ„É•„É©„Éº</option>
                        <option value="chief">„ÉÅ„Éº„Éï</option>
                        <option value="manager">„Éû„Éç„Éº„Ç∏„É£„Éº</option>
                    </select>
                    <input type="number" id="castHourlyRate" placeholder="ÊôÇÁµ¶" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm" required>
                    <div class="flex gap-3 pt-4">
                        <button type="submit" class="flex-1 luxury-btn py-3 md:py-4 rounded-xl font-semibold text-sm">ËøΩÂä†</button>
                        <button type="button" onclick="closeModal('addCastModal')" class="flex-1 bg-gray-800 text-gray-300 py-3 md:py-4 rounded-xl hover:bg-gray-700 transition text-sm">„Ç≠„É£„É≥„Çª„É´</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- „É¢„Éº„ÉÄ„É´: „Ç≠„É£„Çπ„ÉàÁ∑®ÈõÜ -->
    <div id="editCastModal" class="modal fixed inset-0 z-50 items-center justify-center bg-black bg-opacity-70 p-4">
        <div class="w-full max-w-md glass-effect rounded-2xl shadow-2xl">
            <div class="border-b border-gray-700 px-6 md:px-8 py-5 md:py-6 flex items-center justify-between">
                <h2 class="text-xl md:text-2xl font-bold gold-accent">„Ç≠„É£„Çπ„ÉàÁ∑®ÈõÜ</h2>
                <button onclick="closeModal('editCastModal')" class="text-gray-400 hover:text-gray-200 text-2xl">‚úï</button>
            </div>
            <div class="p-6 md:p-8">
                <form onsubmit="updateCast(event)" class="space-y-4 md:space-y-5">
                    <input type="hidden" id="editCastId">
                    <input type="text" id="editCastName" placeholder="ÂêçÂâç" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm" required>
                    <select id="editCastRank" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm">
                        <option value="regular">„É¨„ÇÆ„É•„É©„Éº</option>
                        <option value="chief">„ÉÅ„Éº„Éï</option>
                        <option value="manager">„Éû„Éç„Éº„Ç∏„É£„Éº</option>
                    </select>
                    <input type="number" id="editCastHourlyRate" placeholder="ÊôÇÁµ¶" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm" required>
                    <div class="flex gap-3 pt-4">
                        <button type="submit" class="flex-1 luxury-btn py-3 md:py-4 rounded-xl font-semibold text-sm">Êõ¥Êñ∞</button>
                        <button type="button" onclick="closeModal('editCastModal')" class="flex-1 bg-gray-800 text-gray-300 py-3 md:py-4 rounded-xl hover:bg-gray-700 transition text-sm">„Ç≠„É£„É≥„Çª„É´</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- „É¢„Éº„ÉÄ„É´: „Ç∑„Éï„ÉàËøΩÂä† -->
    <div id="addShiftModal" class="modal fixed inset-0 z-50 items-center justify-center bg-black bg-opacity-70 p-4">
        <div class="w-full max-w-md glass-effect rounded-2xl shadow-2xl">
            <div class="border-b border-gray-700 px-6 md:px-8 py-5 md:py-6 flex items-center justify-between">
                <h2 class="text-xl md:text-2xl font-bold gold-accent">„Ç∑„Éï„ÉàÁôªÈå≤</h2>
                <button onclick="closeModal('addShiftModal')" class="text-gray-400 hover:text-gray-200 text-2xl">‚úï</button>
            </div>
            <div class="p-6 md:p-8">
                <form onsubmit="saveShift(event)" class="space-y-4 md:space-y-5">
                    <select id="shiftCast" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm" required>
                        <option value="">„Ç≠„É£„Çπ„Éà„ÇíÈÅ∏Êäû</option>
                    </select>
                    <input type="date" id="shiftDate" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm" required>
                    <div class="grid grid-cols-2 gap-3 md:gap-4">
                        <input type="time" id="shiftStart" value="20:00" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm">
                        <input type="time" id="shiftEnd" value="01:00" class="w-full px-4 md:px-5 py-3 md:py-4 rounded-xl text-sm">
                    </div>
                    <div class="flex gap-3 pt-4">
                        <button type="submit" class="flex-1 luxury-btn py-3 md:py-4 rounded-xl font-semibold text-sm">ÁôªÈå≤</button>
                        <button type="button" onclick="closeModal('addShiftModal')" class="flex-1 bg-gray-800 text-gray-300 py-3 md:py-4 rounded-xl hover:bg-gray-700 transition text-sm">„Ç≠„É£„É≥„Çª„É´</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000/api/v1';
        
        const appState = {
            currentUser: null,
            currentMonth: new Date(),
            tables: [],
            sessions: [],
            menuItems: [],
            casts: [],
            orders: [],
            shifts: [],
            attendances: [],
            sales: 0,
            apiConnected: false,
            currentMenuImage: null
        };

        function initializeApp() {
            setupBusinessDate();
            loadDemoData();
            syncWithBackend();
            setupCharts();
            updateDashboard();
            initializeShiftCalendar();
            renderAttendance();
            populateCastSelects();
        }

        function setupBusinessDate() {
            const today = new Date();
            document.getElementById('businessDate').textContent = 
                today.toLocaleDateString('ja-JP', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' });
        }

        function loadDemoData() {
            // „ÉÜ„Éº„Éñ„É´„Çí1„Äú6„ÅÆÁï™Âè∑„Å´Â§âÊõ¥
            appState.tables = [
                { id: 1, name: '1', status: 'available' },
                { id: 2, name: '2', status: 'occupied' },
                { id: 3, name: '3', status: 'occupied', isVip: true },
                { id: 4, name: '4', status: 'available' },
                { id: 5, name: '5', status: 'reserved' },
                { id: 6, name: '6', status: 'available' }
            ];

            appState.menuItems = [
                { 
                    id: 1, 
                    name: '„Éâ„É≥„Éö„É™„Éã„É®„É≥ „É≠„Çº', 
                    category: 'bottle', 
                    price: 150000, 
                    stock: 5,
                    description: '„Éó„É¨„Çπ„ÉÜ„Éº„Ç∏„É• „Ç∑„É£„É≥„Éë„É≥',
                    image: null
                },
                { 
                    id: 2, 
                    name: '„Éè„Ç§„Éú„Éº„É´', 
                    category: 'drink', 
                    price: 800, 
                    stock: 100,
                    description: '„ÇØ„É©„Ç∑„ÉÉ„ÇØ„Éè„Ç§„Éú„Éº„É´',
                    image: null
                },
                { 
                    id: 3, 
                    name: '90ÂàÜ„Çª„ÉÉ„Éà', 
                    category: 'set', 
                    price: 5000, 
                    stock: null,
                    description: 'È£≤„ÅøÊîæÈ°å‰ªò„Åç',
                    image: null
                },
                { 
                    id: 4, 
                    name: '„Éï„É´„Éº„ÉÑÁõõ„ÇäÂêà„Çè„Åõ', 
                    category: 'food', 
                    price: 8000, 
                    stock: 20,
                    description: 'Â≠£ÁØÄ„ÅÆ„Éï„É´„Éº„ÉÑ',
                    image: null
                }
            ];

            appState.casts = [
                { id: 1, name: '„Åï„Åè„Çâ', rank: 'chief', hourlyRate: 3500, sales: 285000 },
                { id: 2, name: '„ÇÜ„Åç', rank: 'regular', hourlyRate: 2500, sales: 168000 },
                { id: 3, name: '„Åø„Åã', rank: 'manager', hourlyRate: 4000, sales: 342000 }
            ];

            appState.sessions = [
                { id: 1, tableId: 2, startTime: '21:30', guests: 4, total: 26400 },
                { id: 2, tableId: 3, startTime: '20:00', guests: 6, total: 160000 }
            ];

            appState.attendances = [
                { id: 1, castId: 1, date: new Date().toISOString().split('T')[0], clockIn: '20:00', clockOut: null, status: 'working' }
            ];

            renderTables();
            renderMenu();
            renderCasts();
            renderReports();
        }

        async function syncWithBackend() {
            try {
                showNotification('API„Å®ÂêåÊúü‰∏≠...', 'info');
                
                const [tables, menu, casts] = await Promise.all([
                    fetch(`${API_BASE}/tables`).then(r => r.ok ? r.json() : []),
                    fetch(`${API_BASE}/menu`).then(r => r.ok ? r.json() : []),
                    fetch(`${API_BASE}/casts`).then(r => r.ok ? r.json() : [])
                ]);

                if (tables.length) appState.tables = tables;
                if (menu.length) appState.menuItems = menu;
                if (casts.length) appState.casts = casts;

                appState.apiConnected = true;
                showNotification('APIÂêåÊúüÂÆå‰∫ÜÔºÅ', 'success');
                
                renderTables();
                renderMenu();
                renderCasts();
            } catch (error) {
                console.error('APIÂêåÊúü„Ç®„É©„Éº:', error);
                showNotification('API„Ç™„Éï„É©„Ç§„É≥ - „Éá„É¢„É¢„Éº„Éâ„ÅßÂãï‰Ωú‰∏≠', 'warning');
                appState.apiConnected = false;
            }
        }

        function handleLogin(event) {
            event.preventDefault();
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('dashboardPage').classList.remove('hidden');
            initializeApp();
            showNotification('„É≠„Ç∞„Ç§„É≥„Åó„Åæ„Åó„Åü', 'success');
        }

        function logout() {
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('dashboardPage').classList.add('hidden');
            showNotification('„É≠„Ç∞„Ç¢„Ç¶„Éà„Åó„Åæ„Åó„Åü', 'info');
        }

        function showTab(tabName) {
            // „Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑÂàáÊõø
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„Éä„Éì
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // „É¢„Éê„Ç§„É´„Éú„Éà„É†„Éä„Éì
            document.querySelectorAll('.bottom-nav-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.tab === tabName) {
                    btn.classList.add('active');
                }
            });
            
            // „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Éú„Çø„É≥„ÇíÊõ¥Êñ∞
            const activeBtn = Array.from(document.querySelectorAll('.nav-btn')).find(btn => {
                return btn.textContent.includes(getTabLabel(tabName));
            });
            if (activeBtn) activeBtn.classList.add('active');
            
            // „É¢„Éê„Ç§„É´„Çµ„Ç§„Éâ„Éê„Éº„ÇíÈñâ„Åò„Çã
            if (window.innerWidth < 768) {
                document.getElementById('sidebar').classList.remove('active');
            }
        }
        
        function getTabLabel(tabName) {
            const labels = {
                dashboard: '„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ',
                tables: '„ÉÜ„Éº„Éñ„É´ÁÆ°ÁêÜ',
                attendance: 'Âã§ÊÄ†ÁÆ°ÁêÜ',
                shifts: '„Ç∑„Éï„ÉàÁÆ°ÁêÜ',
                menu: '„É°„Éã„É•„ÉºÁÆ°ÁêÜ',
                casts: '„Ç≠„É£„Çπ„ÉàÁÆ°ÁêÜ',
                reports: 'Â£≤‰∏ä„É¨„Éù„Éº„Éà'
            };
            return labels[tabName] || '';
        }

        function toggleMobileSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

        // ÂïÜÂìÅÁîªÂÉè„Éó„É¨„Éì„É•„Éº
        function previewMenuImage(event) {
            const file = event.target.files[0];
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    showNotification('ÁîªÂÉè„Çµ„Ç§„Ç∫„ÅØ5MB‰ª•‰∏ã„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ', 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    appState.currentMenuImage = e.target.result;
                    const preview = document.getElementById('menuImagePreview');
                    preview.src = e.target.result;
                    preview.classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        }

        // „É°„Éã„É•„ÉºË°®Á§∫
        function renderMenu() {
            const grid = document.getElementById('menuGrid');
            if (!grid) return;
            
            grid.innerHTML = appState.menuItems.map(item => `
                <div class="luxury-card rounded-2xl overflow-hidden shadow-xl">
                    <div class="menu-image-container">
                        ${item.image ? 
                            `<img src="${item.image}" class="menu-image" alt="${item.name}" />` :
                            `<div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900">
                                <span class="text-6xl">${getCategoryEmoji(item.category)}</span>
                            </div>`
                        }
                    </div>
                    <div class="p-4 md:p-6">
                        <div class="flex items-start justify-between mb-3">
                            <div class="flex-1">
                                <h3 class="text-base md:text-lg font-bold text-gray-200 mb-1">${item.name}</h3>
                                <p class="text-xs text-gray-400">${item.description || ''}</p>
                            </div>
                            <span class="ml-2 text-xs px-2 md:px-3 py-1 rounded-full ${getCategoryColor(item.category)}">
                                ${getCategoryLabel(item.category)}
                            </span>
                        </div>
                        <div class="flex items-center justify-between mb-4">
                            <p class="text-xl md:text-2xl font-bold gold-accent">¬•${item.price.toLocaleString()}</p>
                            <p class="text-xs md:text-sm text-gray-400">Âú®Â∫´: ${item.stock || '‚àû'}</p>
                        </div>
                        <button onclick="deleteMenuItem(${item.id})" class="w-full bg-red-900/20 border border-red-800/30 text-red-400 py-2.5 md:py-3 rounded-xl hover:bg-red-900/30 transition text-sm">
                            ÂâäÈô§
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function getCategoryEmoji(category) {
            const emojis = { bottle: 'üçæ', drink: 'ü•É', food: 'üçΩÔ∏è', set: '‚ú®' };
            return emojis[category] || 'üç¥';
        }

        function getCategoryColor(category) {
            const colors = {
                bottle: 'bg-purple-900/30 text-purple-400',
                drink: 'bg-blue-900/30 text-blue-400',
                food: 'bg-green-900/30 text-green-400',
                set: 'bg-yellow-900/30 text-yellow-400'
            };
            return colors[category] || 'bg-gray-900/30 text-gray-400';
        }

        function getCategoryLabel(category) {
            const labels = { bottle: '„Éú„Éà„É´', drink: '„Éâ„É™„É≥„ÇØ', food: '„Éï„Éº„Éâ', set: '„Çª„ÉÉ„Éà' };
            return labels[category] || category;
        }

        function openAddMenuModal() {
            appState.currentMenuImage = null;
            document.getElementById('menuImageInput').value = '';
            document.getElementById('menuImagePreview').classList.add('hidden');
            document.getElementById('addMenuModal').classList.add('active');
        }

        async function addMenuItem(event) {
            event.preventDefault();
            
            const newItem = {
                id: appState.menuItems.length + 1,
                name: document.getElementById('menuName').value,
                category: document.getElementById('menuCategory').value,
                price: parseInt(document.getElementById('menuPrice').value),
                description: document.getElementById('menuDescription').value,
                stock: 10,
                image: appState.currentMenuImage
            };

            appState.menuItems.push(newItem);
            
            if (appState.apiConnected) {
                try {
                    await fetch(`${API_BASE}/menu`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(newItem)
                    });
                } catch (error) {
                    console.error('„É°„Éã„É•„ÉºËøΩÂä†„Ç®„É©„Éº:', error);
                }
            }

            renderMenu();
            closeModal('addMenuModal');
            showNotification('„É°„Éã„É•„Éº„ÇíËøΩÂä†„Åó„Åæ„Åó„Åü', 'success');
        }

        function deleteMenuItem(id) {
            if (confirm('ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü')) {
                appState.menuItems = appState.menuItems.filter(item => item.id !== id);
                renderMenu();
                showNotification('ÂâäÈô§„Åó„Åæ„Åó„Åü', 'info');
            }
        }

        // „ÉÜ„Éº„Éñ„É´Ë°®Á§∫
        function renderTables() {
            const grid = document.getElementById('tablesGrid');
            if (!grid) return;
            
            grid.innerHTML = appState.tables.map(table => {
                const statusClass = {
                    'available': 'bg-green-900/20 border-green-700/40',
                    'occupied': 'bg-red-900/20 border-red-700/40',
                    'reserved': 'bg-yellow-900/20 border-yellow-700/40'
                }[table.status];
                
                const statusText = {
                    'available': 'Á©∫Â∏≠',
                    'occupied': '‰ΩøÁî®‰∏≠',
                    'reserved': '‰∫àÁ¥Ñ'
                }[table.status];

                const statusDot = {
                    'available': 'status-available',
                    'occupied': 'status-occupied',
                    'reserved': 'status-reserved'
                }[table.status];
                
                return `
                    <div class="luxury-card ${statusClass} rounded-2xl p-4 md:p-6 cursor-pointer hover:shadow-2xl transition-all">
                        ${table.isVip ? '<div class="text-xs gold-accent font-bold mb-2">‚≠ê VIP</div>' : ''}
                        <div class="text-center">
                            <p class="table-name text-gray-200 mb-2">${table.name}</p>
                            <div class="flex items-center justify-center">
                                <span class="status-dot ${statusDot}"></span>
                                <span class="text-xs md:text-sm text-gray-400">${statusText}</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // „Ç≠„É£„Çπ„ÉàË°®Á§∫
        function renderCasts() {
            const grid = document.getElementById('castsGrid');
            if (!grid) return;
            
            grid.innerHTML = appState.casts.map(cast => `
                <div class="luxury-card rounded-2xl p-6 md:p-8 shadow-xl">
                    <div class="flex items-center justify-center mb-4 md:mb-6">
                        <div class="w-16 h-16 md:w-20 md:h-20 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-2xl md:text-3xl">
                            üë§
                        </div>
                    </div>
                    <div class="text-center mb-4 md:mb-6">
                        <h3 class="text-xl md:text-2xl font-bold text-gray-200 mb-2">${cast.name}</h3>
                        <span class="text-xs px-3 md:px-4 py-1.5 md:py-2 rounded-full ${getRankColor(cast.rank)}">
                            ${getRankLabel(cast.rank)}
                        </span>
                    </div>
                    <div class="space-y-2 md:space-y-3 text-sm mb-4 md:mb-6">
                        <div class="flex justify-between items-center p-2 md:p-3 bg-gray-800/30 rounded-lg">
                            <span class="text-gray-400 text-xs md:text-sm">ÊôÇÁµ¶</span>
                            <span class="font-semibold text-gray-200 text-xs md:text-sm">¬•${cast.hourlyRate.toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between items-center p-2 md:p-3 bg-gray-800/30 rounded-lg">
                            <span class="text-gray-400 text-xs md:text-sm">Êú¨Êó•Â£≤‰∏ä</span>
                            <span class="font-semibold gold-accent text-xs md:text-sm">¬•${cast.sales.toLocaleString()}</span>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 md:gap-3">
                        <button onclick="editCast(${cast.id})" class="bg-blue-900/30 border border-blue-700/50 text-blue-400 py-2.5 md:py-3 rounded-xl hover:bg-blue-900/50 transition text-xs md:text-sm font-medium">
                            Á∑®ÈõÜ
                        </button>
                        <button onclick="deleteCast(${cast.id})" class="bg-red-900/30 border border-red-700/50 text-red-400 py-2.5 md:py-3 rounded-xl hover:bg-red-900/50 transition text-xs md:text-sm font-medium">
                            ÂâäÈô§
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function getRankColor(rank) {
            const colors = {
                regular: 'bg-gray-900/30 text-gray-400',
                chief: 'bg-blue-900/30 text-blue-400',
                manager: 'bg-purple-900/30 text-purple-400'
            };
            return colors[rank] || 'bg-gray-900/30 text-gray-400';
        }

        function getRankLabel(rank) {
            const labels = { regular: '„É¨„ÇÆ„É•„É©„Éº', chief: '„ÉÅ„Éº„Éï', manager: '„Éû„Éç„Éº„Ç∏„É£„Éº' };
            return labels[rank] || rank;
        }

        function openAddCastModal() {
            document.getElementById('addCastModal').classList.add('active');
        }

        async function addCast(event) {
            event.preventDefault();
            
            const newCast = {
                id: appState.casts.length + 1,
                name: document.getElementById('castName').value,
                rank: document.getElementById('castRank').value,
                hourlyRate: parseInt(document.getElementById('castHourlyRate').value),
                sales: 0
            };

            appState.casts.push(newCast);
            
            if (appState.apiConnected) {
                try {
                    await fetch(`${API_BASE}/casts`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(newCast)
                    });
                } catch (error) {
                    console.error('„Ç≠„É£„Çπ„ÉàËøΩÂä†„Ç®„É©„Éº:', error);
                }
            }

            renderCasts();
            populateCastSelects();
            closeModal('addCastModal');
            showNotification('„Ç≠„É£„Çπ„Éà„ÇíËøΩÂä†„Åó„Åæ„Åó„Åü', 'success');
        }

        function editCast(id) {
            const cast = appState.casts.find(c => c.id === id);
            if (!cast) return;
            
            document.getElementById('editCastId').value = cast.id;
            document.getElementById('editCastName').value = cast.name;
            document.getElementById('editCastRank').value = cast.rank;
            document.getElementById('editCastHourlyRate').value = cast.hourlyRate;
            
            document.getElementById('editCastModal').classList.add('active');
        }

        async function updateCast(event) {
            event.preventDefault();
            
            const id = parseInt(document.getElementById('editCastId').value);
            const cast = appState.casts.find(c => c.id === id);
            
            if (cast) {
                cast.name = document.getElementById('editCastName').value;
                cast.rank = document.getElementById('editCastRank').value;
                cast.hourlyRate = parseInt(document.getElementById('editCastHourlyRate').value);
                
                if (appState.apiConnected) {
                    try {
                        await fetch(`${API_BASE}/casts/${id}`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(cast)
                        });
                    } catch (error) {
                        console.error('APIÊõ¥Êñ∞„Ç®„É©„Éº:', error);
                    }
                }
                
                renderCasts();
                populateCastSelects();
                closeModal('editCastModal');
                showNotification('„Ç≠„É£„Çπ„ÉàÊÉÖÂ†±„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü', 'success');
            }
        }

        function deleteCast(id) {
            if (confirm('ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü')) {
                appState.casts = appState.casts.filter(cast => cast.id !== id);
                renderCasts();
                populateCastSelects();
                showNotification('ÂâäÈô§„Åó„Åæ„Åó„Åü', 'info');
            }
        }

        // Âã§ÊÄ†ÁÆ°ÁêÜ
        function populateCastSelects() {
            const select = document.getElementById('attendanceCast');
            const shiftSelect = document.getElementById('shiftCast');
            
            const options = '<option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>' + 
                appState.casts.map(c => `<option value="${c.id}">${c.name}</option>`).join('');
            
            if (select) select.innerHTML = options;
            if (shiftSelect) shiftSelect.innerHTML = options;
        }

        function clockIn() {
            const castId = parseInt(document.getElementById('attendanceCast').value);
            if (!castId) {
                showNotification('„Ç≠„É£„Çπ„Éà„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ', 'warning');
                return;
            }

            const now = new Date();
            const attendance = {
                id: appState.attendances.length + 1,
                castId: castId,
                date: now.toISOString().split('T')[0],
                clockIn: now.toTimeString().split(' ')[0],
                clockOut: null,
                status: 'working'
            };

            appState.attendances.push(attendance);
            showNotification('Âá∫Âã§ÊâìÂàª„Åó„Åæ„Åó„Åü', 'success');
            renderAttendance();
            updateDashboard();
        }

        function clockOut() {
            const castId = parseInt(document.getElementById('attendanceCast').value);
            if (!castId) {
                showNotification('„Ç≠„É£„Çπ„Éà„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ', 'warning');
                return;
            }

            const attendance = appState.attendances.find(a => 
                a.castId === castId && 
                a.date === new Date().toISOString().split('T')[0] && 
                a.status === 'working'
            );

            if (!attendance) {
                showNotification('Âá∫Âã§Ë®òÈå≤„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì', 'error');
                return;
            }

            attendance.clockOut = new Date().toTimeString().split(' ')[0];
            attendance.status = 'completed';
            
            showNotification('ÈÄÄÂã§ÊâìÂàª„Åó„Åæ„Åó„Åü', 'success');
            renderAttendance();
            updateDashboard();
        }

        function renderAttendance() {
            const today = new Date().toISOString().split('T')[0];
            const todayAttendances = appState.attendances.filter(a => a.date === today && a.status === 'working');
            
            const todayDiv = document.getElementById('todayAttendance');
            if (todayDiv) {
                todayDiv.innerHTML = todayAttendances.length === 0 
                    ? '<p class="text-gray-500 text-center py-6 text-sm">Âá∫Âã§ËÄÖ„Å™„Åó</p>'
                    : todayAttendances.map(a => {
                        const cast = appState.casts.find(c => c.id === a.castId);
                        return `
                            <div class="flex justify-between items-center p-3 md:p-4 bg-green-900/20 border border-green-700/40 rounded-xl">
                                <div>
                                    <p class="font-semibold text-gray-200 text-sm md:text-base">${cast?.name || ''}</p>
                                    <p class="text-xs text-gray-400">Âá∫Âã§: ${a.clockIn}</p>
                                </div>
                                <span class="text-xs px-2 md:px-3 py-1 bg-green-900/40 text-green-400 rounded-full">Âã§Âãô‰∏≠</span>
                            </div>
                        `;
                    }).join('');
            }

            const tbody = document.getElementById('attendanceTableBody');
            if (tbody) {
                tbody.innerHTML = appState.attendances.slice().reverse().map(a => {
                    const cast = appState.casts.find(c => c.id === a.castId);
                    const hours = a.clockOut ? calculateHours(a.clockIn, a.clockOut) : '-';
                    const status = a.status === 'working' ? 'Âã§Âãô‰∏≠' : 'ÈÄÄÂã§Ê∏à';
                    const statusClass = a.status === 'working' ? 'text-green-400' : 'text-gray-400';
                    
                    return `
                        <tr>
                            <td class="py-3 md:py-4 px-3 md:px-6 text-gray-300 text-xs md:text-sm">${a.date}</td>
                            <td class="py-3 md:py-4 px-3 md:px-6 text-gray-300 text-xs md:text-sm">${cast?.name || ''}</td>
                            <td class="py-3 md:py-4 px-3 md:px-6 text-center text-gray-300 text-xs md:text-sm">${a.clockIn}</td>
                            <td class="py-3 md:py-4 px-3 md:px-6 text-center text-gray-300 text-xs md:text-sm">${a.clockOut || '-'}</td>
                            <td class="py-3 md:py-4 px-3 md:px-6 text-center text-gray-300 text-xs md:text-sm hidden md:table-cell">${hours}</td>
                            <td class="py-3 md:py-4 px-3 md:px-6 text-center ${statusClass} font-medium text-xs md:text-sm">${status}</td>
                        </tr>
                    `;
                }).join('');
            }
        }

        function calculateHours(clockIn, clockOut) {
            const [h1, m1] = clockIn.split(':').map(Number);
            const [h2, m2] = clockOut.split(':').map(Number);
            const minutes = (h2 * 60 + m2) - (h1 * 60 + m1);
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;
            return `${hours}ÊôÇÈñì${mins}ÂàÜ`;
        }

        function exportAttendanceCSV() {
            const csv = 'Êó•‰ªò,„Ç≠„É£„Çπ„Éà,Âá∫Âã§,ÈÄÄÂã§,Âä¥ÂÉçÊôÇÈñì,Áä∂ÊÖã\n' + 
                appState.attendances.map(a => {
                    const cast = appState.casts.find(c => c.id === a.castId);
                    const hours = a.clockOut ? calculateHours(a.clockIn, a.clockOut) : '-';
                    return `${a.date},${cast?.name},${a.clockIn},${a.clockOut || ''},${hours},${a.status}`;
                }).join('\n');
            
            downloadCSV(csv, 'attendance.csv');
            showNotification('Âã§ÊÄ†CSV„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„Åæ„Åó„Åü', 'success');
        }

        // „Ç∑„Éï„ÉàÁÆ°ÁêÜ
        function initializeShiftCalendar() {
            appState.shifts = [
                { id: 1, castId: 1, date: '2024-11-08', start: '20:00', end: '01:00' },
                { id: 2, castId: 2, date: '2024-11-08', start: '21:00', end: '02:00' }
            ];
            renderShiftCalendar();
            renderWeeklyShifts();
        }

        function renderShiftCalendar() {
            const calendar = document.getElementById('shiftCalendar');
            if (!calendar) return;

            const year = appState.currentMonth.getFullYear();
            const month = appState.currentMonth.getMonth();
            const firstDay = new Date(year, month, 1).getDay();
            const lastDate = new Date(year, month + 1, 0).getDate();

            document.getElementById('currentMonth').textContent = `${year}Âπ¥${month + 1}Êúà`;

            let html = '';
            const weekDays = ['Êó•', 'Êúà', 'ÁÅ´', 'Ê∞¥', 'Êú®', 'Èáë', 'Âúü'];
            weekDays.forEach(day => {
                html += `<div class="text-center font-semibold p-2 md:p-3 text-gray-400 text-xs md:text-sm">${day}</div>`;
            });

            for (let i = 0; i < firstDay; i++) {
                html += `<div class="p-2"></div>`;
            }

            for (let date = 1; date <= lastDate; date++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(date).padStart(2, '0')}`;
                const shiftsForDate = appState.shifts.filter(s => s.date === dateStr);
                const isToday = dateStr === new Date().toISOString().split('T')[0];
                
                html += `<div class="calendar-cell border border-gray-800 ${isToday ? 'bg-yellow-900/10 border-yellow-700/30' : ''}">
                    <div class="font-semibold text-xs md:text-sm mb-1 md:mb-2 ${isToday ? 'text-yellow-500' : 'text-gray-400'}">${date}</div>
                    <div class="space-y-1">
                        ${shiftsForDate.map(shift => {
                            const cast = appState.casts.find(c => c.id === shift.castId);
                            return `<div class="shift-badge">${cast?.name || ''}</div>`;
                        }).join('')}
                    </div>
                </div>`;
            }

            calendar.innerHTML = html;
        }

        function renderWeeklyShifts() {
            const container = document.getElementById('weeklyShifts');
            if (!container) return;

            const today = new Date();
            const weekShifts = appState.shifts.filter(s => {
                const shiftDate = new Date(s.date);
                const diff = Math.floor((shiftDate - today) / (1000 * 60 * 60 * 24));
                return diff >= 0 && diff < 7;
            });

            container.innerHTML = weekShifts.length === 0 
                ? '<p class="text-gray-500 text-center py-6 text-sm">‰ªäÈÄ±„ÅÆ„Ç∑„Éï„Éà„Å™„Åó</p>'
                : weekShifts.map(shift => {
                    const cast = appState.casts.find(c => c.id === shift.castId);
                    return `
                        <div class="flex justify-between items-center p-4 md:p-5 bg-gray-800/30 rounded-xl hover:bg-gray-800/50 transition">
                            <div>
                                <p class="font-bold text-base md:text-lg text-gray-200">${cast?.name || ''}</p>
                                <p class="text-xs md:text-sm text-gray-400">${shift.date}</p>
                            </div>
                            <div class="text-right">
                                <p class="text-xs md:text-sm text-gray-300">${shift.start} - ${shift.end}</p>
                            </div>
                        </div>
                    `;
                }).join('');
        }

        function openAddShiftModal() {
            populateCastSelects();
            document.getElementById('addShiftModal').classList.add('active');
        }

        async function saveShift(event) {
            event.preventDefault();
            
            const shift = {
                id: appState.shifts.length + 1,
                castId: parseInt(document.getElementById('shiftCast').value),
                date: document.getElementById('shiftDate').value,
                start: document.getElementById('shiftStart').value,
                end: document.getElementById('shiftEnd').value
            };

            appState.shifts.push(shift);
            
            if (appState.apiConnected) {
                try {
                    await fetch(`${API_BASE}/shifts`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(shift)
                    });
                } catch (error) {
                    console.error('„Ç∑„Éï„ÉàÁôªÈå≤„Ç®„É©„Éº:', error);
                }
            }

            renderShiftCalendar();
            renderWeeklyShifts();
            closeModal('addShiftModal');
            showNotification('„Ç∑„Éï„Éà„ÇíÁôªÈå≤„Åó„Åæ„Åó„Åü', 'success');
        }

        function previousMonth() {
            appState.currentMonth.setMonth(appState.currentMonth.getMonth() - 1);
            renderShiftCalendar();
        }

        function nextMonth() {
            appState.currentMonth.setMonth(appState.currentMonth.getMonth() + 1);
            renderShiftCalendar();
        }

        // „É¨„Éù„Éº„Éà
        function renderReports() {
            const tbody = document.getElementById('reportTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = appState.sessions.map(session => {
                const table = appState.tables.find(t => t.id === session.tableId);
                return `
                    <tr>
                        <td class="py-3 md:py-4 px-3 md:px-6 text-gray-300 text-xs md:text-sm">${new Date().toLocaleDateString()}</td>
                        <td class="py-3 md:py-4 px-3 md:px-6 text-gray-300 text-xs md:text-sm">${table?.name || '-'}</td>
                        <td class="py-3 md:py-4 px-3 md:px-6 text-center text-gray-300 text-xs md:text-sm hidden md:table-cell">${session.guests}</td>
                        <td class="py-3 md:py-4 px-3 md:px-6 text-right font-semibold gold-accent text-xs md:text-sm">¬•${session.total.toLocaleString()}</td>
                    </tr>
                `;
            }).join('');
        }

        function generateReport(type) {
            showNotification(`${type}„É¨„Éù„Éº„Éà„ÇíÁîüÊàê‰∏≠...`, 'info');
            setTimeout(() => {
                showNotification(`${type}„É¨„Éù„Éº„Éà„ÇíÁîüÊàê„Åó„Åæ„Åó„Åü`, 'success');
            }, 1000);
        }

        function exportFullReport() {
            showNotification('„Éï„É´„É¨„Éù„Éº„Éà„ÇíÂá∫Âäõ‰∏≠...', 'info');
            setTimeout(() => {
                showNotification('„Éï„É´„É¨„Éù„Éº„Éà„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„Åæ„Åó„Åü', 'success');
            }, 1500);
        }

        // „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÊõ¥Êñ∞
        function updateDashboard() {
            const totalSales = appState.sessions.reduce((sum, s) => sum + s.total, 0);
            const workingCount = appState.attendances.filter(a => a.status === 'working').length;
            
            document.getElementById('totalSales').textContent = `¬•${totalSales.toLocaleString()}`;
            document.getElementById('totalCustomers').textContent = `${appState.sessions.length}ÁµÑ`;
            document.getElementById('workingCasts').textContent = `${workingCount}Âêç`;
            
            const avg = Math.round(totalSales / (appState.sessions.length || 1));
            document.getElementById('averageSpend').textContent = `¬•${avg.toLocaleString()}`;

            const activities = document.getElementById('recentActivities');
            if (activities) {
                activities.innerHTML = `
                    <div class="flex justify-between items-center py-3 border-b border-gray-800">
                        <div>
                            <p class="text-sm text-gray-300">„ÉÜ„Éº„Éñ„É´2„ÇíÈñã„Åç„Åæ„Åó„Åü</p>
                            <p class="text-xs text-gray-500">22:30</p>
                        </div>
                        <span class="text-xs px-3 py-1 bg-green-900/30 text-green-400 rounded-full">Êñ∞Ë¶è</span>
                    </div>
                    <div class="flex justify-between items-center py-3 border-b border-gray-800">
                        <div>
                            <p class="text-sm text-gray-300">„ÉÜ„Éº„Éñ„É´3„Å´Ê≥®ÊñáËøΩÂä†</p>
                            <p class="text-xs text-gray-500">22:15</p>
                        </div>
                        <span class="text-xs px-3 py-1 bg-blue-900/30 text-blue-400 rounded-full">Ê≥®Êñá</span>
                    </div>
                    <div class="flex justify-between items-center py-3">
                        <div>
                            <p class="text-sm text-gray-300">„Åï„Åè„ÇâÂá∫Âã§ÊâìÂàª</p>
                            <p class="text-xs text-gray-500">20:00</p>
                        </div>
                        <span class="text-xs px-3 py-1 bg-purple-900/30 text-purple-400 rounded-full">Âã§ÊÄ†</span>
                    </div>
                `;
            }
        }

        // „Ç∞„É©„ÉïË®≠ÂÆö
        function setupCharts() {
            Chart.defaults.color = '#9ca3af';
            Chart.defaults.borderColor = 'rgba(255, 255, 255, 0.1)';
            
            const salesCtx = document.getElementById('salesChart');
            if (salesCtx) {
                new Chart(salesCtx, {
                    type: 'bar',
                    data: {
                        labels: ['19ÊôÇ', '20ÊôÇ', '21ÊôÇ', '22ÊôÇ', '23ÊôÇ', '24ÊôÇ'],
                        datasets: [{
                            label: 'Â£≤‰∏ä',
                            data: [120000, 180000, 320000, 280000, 150000, 80000],
                            backgroundColor: 'rgba(212, 175, 55, 0.6)',
                            borderColor: 'rgba(212, 175, 55, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: { 
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }

            const dailyCtx = document.getElementById('dailySalesChart');
            if (dailyCtx) {
                new Chart(dailyCtx, {
                    type: 'line',
                    data: {
                        labels: ['Êúà', 'ÁÅ´', 'Ê∞¥', 'Êú®', 'Èáë', 'Âúü', 'Êó•'],
                        datasets: [{
                            label: 'Â£≤‰∏ä',
                            data: [980000, 1120000, 890000, 1340000, 1560000, 1890000, 1650000],
                            borderColor: 'rgba(212, 175, 55, 1)',
                            backgroundColor: 'rgba(212, 175, 55, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: { 
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }

            const categoryCtx = document.getElementById('categorySalesChart');
            if (categoryCtx) {
                new Chart(categoryCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['„Éú„Éà„É´', '„Éâ„É™„É≥„ÇØ', '„Éï„Éº„Éâ', '„Çª„ÉÉ„Éà'],
                        datasets: [{
                            data: [450000, 120000, 80000, 150000],
                            backgroundColor: [
                                'rgba(212, 175, 55, 0.8)',
                                'rgba(147, 51, 234, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(16, 185, 129, 0.8)'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: { 
                        responsive: true,
                        maintainAspectRatio: true
                    }
                });
            }
        }

        // Âç∞Âà∑„Éª„Ç®„ÇØ„Çπ„Éù„Éº„Éà
        function printDailyReport() {
            window.print();
            showNotification('Êó•Â†±„ÇíÂç∞Âà∑„Åó„Åæ„Åô', 'info');
        }

        function printShiftTable() {
            window.print();
            showNotification('„Ç∑„Éï„ÉàË°®„ÇíÂç∞Âà∑„Åó„Åæ„Åô', 'info');
        }

        function exportCSV() {
            const csv = '„ÉÜ„Éº„Éñ„É´,ÊôÇÈñì,‰∫∫Êï∞,Â£≤‰∏ä\n' + 
                appState.sessions.map(s => {
                    const table = appState.tables.find(t => t.id === s.tableId);
                    return `${table?.name},${s.startTime},${s.guests},${s.total}`;
                }).join('\n');
            
            downloadCSV(csv, 'sales.csv');
            showNotification('CSV„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„Åæ„Åó„Åü', 'success');
        }

        function downloadCSV(content, filename) {
            const blob = new Blob([content], { type: 'text/csv;charset=utf-8;' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            window.URL.revokeObjectURL(url);
        }

        // „É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function showNotification(message, type = 'info') {
            const colors = {
                success: 'bg-green-900/90 border-green-700',
                error: 'bg-red-900/90 border-red-700',
                warning: 'bg-yellow-900/90 border-yellow-700',
                info: 'bg-blue-900/90 border-blue-700'
            };
            
            const icons = {
                success: '‚úÖ',
                error: '‚ùå',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è'
            };
            
            const notification = document.createElement('div');
            notification.className = `notification ${colors[type]} border px-4 md:px-6 py-3 md:py-4 rounded-xl shadow-2xl backdrop-blur-sm`;
            notification.innerHTML = `
                <div class="flex items-center gap-3">
                    <span class="text-xl md:text-2xl">${icons[type]}</span>
                    <span class="text-gray-200 font-medium text-sm md:text-base">${message}</span>
                </div>
            `;
            
            document.getElementById('notificationArea').appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transition = 'opacity 0.3s';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // „É¢„Éº„ÉÄ„É´Â§ñ„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„Çã
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });

        // „Çµ„Ç§„Éâ„Éê„ÉºÂ§ñ„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„ÇãÔºà„É¢„Éê„Ç§„É´Ôºâ
        document.addEventListener('click', function(e) {
            const sidebar = document.getElementById('sidebar');
            const menuBtn = e.target.closest('button[onclick="toggleMobileSidebar()"]');
            
            if (window.innerWidth < 768 && 
                sidebar.classList.contains('active') && 
                !sidebar.contains(e.target) && 
                !menuBtn) {
                sidebar.classList.remove('active');
            }
        });
    </script>
</body>
</html>